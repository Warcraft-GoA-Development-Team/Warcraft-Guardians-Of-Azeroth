# Scripted effects made of vanilla code
bid_for_independence_effect = {
	if = {
		limit = {
			FROM = {
				independent = no
			}
		}
		FROM = {
			if = {
				limit = {
					in_revolt = yes
				}
				liege_before_war = {
					ROOT = {
						set_defacto_liege = PREV
					}
				}
			}
			if = {
				limit = {
					in_revolt = no
				}
				liege = {
					ROOT = {
						set_defacto_liege = PREV
					}
				}
			}
		}
	}

	if = {
		limit = {
			FROM = {
				independent = yes
			}
		}
		ROOT = {
			set_defacto_liege = ROOT
		}
	}
}
convert_tribal_to_castle_effect = {
	convert_to = CASTLE
	refill_holding_levy = yes
	
	hidden_effect = {
		location = { #Clear Tribal Great Pillars
			clr_province_flag = flag_great_pillar_norse
			clr_province_flag = flag_great_pillar_tengri
			clr_province_flag = flag_great_pillar_slavic
			clr_province_flag = flag_great_pillar_baltic
			clr_province_flag = flag_great_pillar_finnish
			clr_province_flag = flag_great_pillar_west_african
			clr_province_flag = flag_great_pillar_aztec
			clr_province_flag = flag_great_pillar_bon
			clr_province_flag = flag_great_pillar_zun
			clr_province_flag = flag_great_pillar_hellenic
		}

		if = {
			limit = {
				is_capital = yes
				dejure_liege_title = {
					location = {
						num_of_empty_holdings = 2
					}
					NOT = {
						any_direct_de_jure_vassal_title = {
							holding_type = city
						}
					}
				}
			}
			location = {
				build_holding = {
					type = city
				}
			}
		}
		if = {
			limit = {
				is_capital = yes
				dejure_liege_title = {
					location = {
						num_of_empty_holdings = 2
					}
					NOT = {
						any_direct_de_jure_vassal_title = {
							holding_type = temple
						}
					}
				}
			}
			location = {
				build_holding  ={
					type = temple
				}
			}
		}
	}
}
convert_tribal_to_city_effect = {
	convert_to = CITY
	refill_holding_levy = yes
	
	hidden_effect = {
		location = { #Clear Tribal Great Pillars
			clr_province_flag = flag_great_pillar_norse
			clr_province_flag = flag_great_pillar_tengri
			clr_province_flag = flag_great_pillar_slavic
			clr_province_flag = flag_great_pillar_baltic
			clr_province_flag = flag_great_pillar_finnish
			clr_province_flag = flag_great_pillar_west_african
			clr_province_flag = flag_great_pillar_aztec
			clr_province_flag = flag_great_pillar_bon
			clr_province_flag = flag_great_pillar_zun
			clr_province_flag = flag_great_pillar_hellenic
		}
		if = {
			limit = {
				is_capital = yes
				dejure_liege_title = {
					location = {
						num_of_empty_holdings = 2
					}
					NOT = {
						any_direct_de_jure_vassal_title = {
							holding_type = castle
						}
					}
				}
			}
			location = {
				build_holding = {
					type = castle
				}
			}
		}
		
		if = {
			limit = {
				is_capital = yes
				dejure_liege_title = {
					location = {
						num_of_empty_holdings = 2
					}
					NOT = {
						any_direct_de_jure_vassal_title = {
							holding_type = temple
						}
					}
				}
			}
			location = {
				build_holding = {
					type = temple
				}
			}
		}
	}
}
convert_tribal_to_temple_effect = {
	convert_to = TEMPLE
	refill_holding_levy = yes
	
	hidden_effect = {
		location = { #Clear Tribal Great Pillars
			clr_province_flag = flag_great_pillar_norse
			clr_province_flag = flag_great_pillar_tengri
			clr_province_flag = flag_great_pillar_slavic
			clr_province_flag = flag_great_pillar_baltic
			clr_province_flag = flag_great_pillar_finnish
			clr_province_flag = flag_great_pillar_west_african
			clr_province_flag = flag_great_pillar_aztec
			clr_province_flag = flag_great_pillar_bon
			clr_province_flag = flag_great_pillar_zun
			clr_province_flag = flag_great_pillar_hellenic
		}

		if = {
			limit = {
				is_capital = yes
				dejure_liege_title = {
					location = {
						num_of_empty_holdings = 2
					}
					NOT = {
						any_direct_de_jure_vassal_title = {
							holding_type = castle
						}
					}
				}
			}
			location = {
				build_holding = {
					type = castle
				}
			}
		}
		if = {
			limit = {
				is_capital = yes
				dejure_liege_title = {
					location = {
						num_of_empty_holdings = 2
					}
					NOT = {
						any_direct_de_jure_vassal_title = {
							holding_type = city
						}
					}
				}
			}
			location = {
				build_holding = {
					type = city
				}
			}
		}
	}
}
PREV_society_sacrifice_THIS_effect = {
	# Warcraft
	if = {
		limit = {
			# Warcraft
			PREV = {
				OR = {
					society_member_of = cult_of_the_damned
					society_member_of = shadow_council
					society_member_of = twilights_hammer_cult
				}
			}
		}

		# Warcraft
		save_event_target_as = target_sacrificed_prisoner

		#Head of Religion
		if = {
			limit  = {
				controls_religion = yes
			}
			hidden_effect = {
				PREV = {
					# Warcraft
					if = {
						limit = { society_member_of = shadow_council }
						character_event = { id = WCCLS.605 }
					}
					else = { character_event = { id = MNM.7500 } }
				}
			}
			#Check quests to resolve, add extra currency and play special sound effect
			if = { #Virgin
				limit = {
					is_virgin_trigger = yes
					PREV = {
						OR = {
							# Warcraft
							has_quest = quest_drain_soul_virgin

							has_quest = quest_the_devil_worshipers_sacrifice_virgin
						}
					}
				}
				PREV = {
					show_scope_change = no

					# Warcraft
					if = {
						limit = { has_quest = quest_drain_soul_virgin }
						clr_quest = quest_drain_soul_virgin
					}

					if = {
						limit = { has_quest = quest_the_devil_worshipers_sacrifice_virgin }
						clr_quest = quest_the_devil_worshipers_sacrifice_virgin
					}

					# Warcraft
					add_society_currency_major_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_virgin_female } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_virgin_male } }
				}
				break = yes
			}
			if = { #Priestly
				limit = {
					# Warcraft
					dark_public_religion_trigger = no
					secular_public_religion_trigger = no

					OR = {
						is_priest = yes
						is_ascetic_trigger = yes
					}
					PREV = {
						OR = {
							# Warcraft
							has_quest = quest_drain_soul_holy_person

							has_quest = quest_the_devil_worshipers_sacrifice_holy_person
						}
					}
				}
				PREV = {
					show_scope_change = no

					# Warcraft
					if = {
						limit = { has_quest = quest_drain_soul_holy_person }
						clr_quest = quest_drain_soul_holy_person
					}

					if = {
						limit = { has_quest = quest_the_devil_worshipers_sacrifice_holy_person }
						clr_quest = quest_the_devil_worshipers_sacrifice_holy_person
					}

					# Warcraft
					add_society_currency_major_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_holy_woman } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_holy_man } }
				}
				break = yes
			}
			if = { #Dwarf
				limit = {
					trait = dwarf
					PREV = { has_quest = quest_the_devil_worshipers_sacrifice_dwarf }
				}
				PREV = {
					show_scope_change = no
					clr_quest = quest_the_devil_worshipers_sacrifice_dwarf

					# Warcraft
					add_society_currency_major_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_dwarf_female } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_dwarf_male } }
				}
				break = yes
			}
			if = { #Ruler
				limit = {
					is_landed = yes
					PREV = {
						OR = {
							# Warcraft
							has_quest = quest_drain_soul_ruler

							has_quest = quest_the_devil_worshipers_sacrifice_ruler
						}
					}
				}
				PREV = {
					show_scope_change = no

					# Warcraft
					if = {
						limit = { has_quest = quest_drain_soul_ruler }
						clr_quest = quest_drain_soul_ruler
					}

					if = {
						limit = { has_quest = quest_the_devil_worshipers_sacrifice_ruler }
						clr_quest = quest_the_devil_worshipers_sacrifice_ruler
					}

					# Warcraft
					add_society_currency_major_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_female } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_male } }
				}
				break = yes
			}
			#No quest so add default
			PREV = {
				show_scope_change = no
				add_society_currency_medium_effect = yes
			}
			trigger_switch = {
				on_trigger = is_female
				yes = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_female } }
				no = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_male } }
			}
			break = yes
		}
		#Holy Man
		if = {
			limit  = {
				# Warcraft
				dark_public_religion_trigger = no
				secular_public_religion_trigger = no

				OR = {
					is_priest = yes
					is_ascetic_trigger = yes
				}
			}
			hidden_effect = {
				PREV = {
					# Warcraft
					if = {
						limit = { society_member_of = shadow_council }
						character_event = { id = WCCLS.605 }
					}
					else = { character_event = { id = MNM.7501 } }
				}
			}
			#Check quests to resolve, add extra currency and play special sound effect
			if = { #Virgin
				limit = {
					is_virgin_trigger = yes
					PREV = {
						OR = {
							# Warcraft
							has_quest = quest_drain_soul_virgin

							has_quest = quest_the_devil_worshipers_sacrifice_virgin
						}
					}
				}
				PREV = {
					show_scope_change = no

					# Warcraft
					if = {
						limit = { has_quest = quest_drain_soul_virgin }
						clr_quest = quest_drain_soul_virgin
					}

					if = {
						limit = { has_quest = quest_the_devil_worshipers_sacrifice_virgin }
						clr_quest = quest_the_devil_worshipers_sacrifice_virgin
					}

					# Warcraft
					add_society_currency_medium_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_virgin_female } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_virgin_male } }
				}
				break = yes
			}
			if = { #Priestly
				limit = {
					# Warcraft
					dark_public_religion_trigger = no
					secular_public_religion_trigger = no

					OR = {
						is_priest = yes
						is_ascetic_trigger = yes
					}
					PREV = {
						OR = {
							# Warcraft
							has_quest = quest_drain_soul_holy_person

							has_quest = quest_the_devil_worshipers_sacrifice_holy_person
						}
					}
				}
				PREV = {
					show_scope_change = no

					# Warcraft
					if = {
						limit = { has_quest = quest_drain_soul_holy_person }
						clr_quest = quest_drain_soul_holy_person
					}

					if = {
						limit = { has_quest = quest_the_devil_worshipers_sacrifice_holy_person }
						clr_quest = quest_the_devil_worshipers_sacrifice_holy_person
					}

					# Warcraft
					add_society_currency_medium_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_holy_woman } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_holy_man } }
				}
				break = yes
			}
			if = { #Dwarf
				limit = {
					trait = dwarf
					PREV = { has_quest = quest_the_devil_worshipers_sacrifice_dwarf }
				}
				PREV = {
					show_scope_change = no
					clr_quest = quest_the_devil_worshipers_sacrifice_dwarf

					# Warcraft
					add_society_currency_medium_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_dwarf_female } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_dwarf_male } }
				}
				break = yes
			}
			if = { #Ruler
				limit = {
					is_landed = yes
					PREV = {
						OR = {
							# Warcraft
							has_quest = quest_drain_soul_ruler

							has_quest = quest_the_devil_worshipers_sacrifice_ruler
						}
					}
				}
				PREV = {
					show_scope_change = no

					# Warcraft
					if = {
						limit = { has_quest = quest_drain_soul_ruler }
						clr_quest = quest_drain_soul_ruler
					}

					if = {
						limit = { has_quest = quest_the_devil_worshipers_sacrifice_ruler }
						clr_quest = quest_the_devil_worshipers_sacrifice_ruler
					}

					# Warcraft
					add_society_currency_medium_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_female } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_male } }
				}
				break = yes
			}
			#No quest so add default
			PREV = {
				show_scope_change = no
				add_society_currency_minor_effect = yes
			}
			trigger_switch = {
				on_trigger = is_female
				yes = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_female } }
				no = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_male } }
			}
			break = yes
		}
		#Dwarf
		if = {
			limit  = {
				trait = dwarf
			}
			hidden_effect = {
				PREV = {
					# Warcraft
					if = {
						limit = { society_member_of = shadow_council }
						character_event = { id = WCCLS.605 }
					}
					else = { character_event = { id = MNM.7502 } }
				}
			}
			#Check quests to resolve, add extra currency and play special sound effect
			if = { #Virgin
				limit = {
					is_virgin_trigger = yes
					PREV = {
						OR = {
							# Warcraft
							has_quest = quest_drain_soul_virgin

							has_quest = quest_the_devil_worshipers_sacrifice_virgin
						}
					}
				}
				PREV = {
					show_scope_change = no

					# Warcraft
					if = {
						limit = { has_quest = quest_drain_soul_virgin }
						clr_quest = quest_drain_soul_virgin
					}

					if = {
						limit = { has_quest = quest_the_devil_worshipers_sacrifice_virgin }
						clr_quest = quest_the_devil_worshipers_sacrifice_virgin
					}

					# Warcraft
					add_society_currency_medium_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_virgin_female } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_virgin_male } }
				}
				break = yes
			}
			if = { #Priestly
				limit = {
					# Warcraft
					dark_public_religion_trigger = no
					secular_public_religion_trigger = no

					OR = {
						is_priest = yes
						is_ascetic_trigger = yes
					}
					PREV = {
						OR = {
							# Warcraft
							has_quest = quest_drain_soul_holy_person

							has_quest = quest_the_devil_worshipers_sacrifice_holy_person
						}
					}
				}
				PREV = {
					show_scope_change = no

					# Warcraft
					if = {
						limit = { has_quest = quest_drain_soul_holy_person }
						clr_quest = quest_drain_soul_holy_person
					}

					if = {
						limit = { has_quest = quest_the_devil_worshipers_sacrifice_holy_person }
						clr_quest = quest_the_devil_worshipers_sacrifice_holy_person
					}

					# Warcraft
					add_society_currency_medium_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_holy_woman } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_holy_man } }
				}
				break = yes
			}
			if = { #Dwarf
				limit = {
					trait = dwarf
					PREV = { has_quest = quest_the_devil_worshipers_sacrifice_dwarf }
				}
				PREV = {
					show_scope_change = no
					clr_quest = quest_the_devil_worshipers_sacrifice_dwarf

					# Warcraft
					add_society_currency_medium_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_dwarf_female } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_dwarf_male } }
				}
				break = yes
			}
			if = { #Ruler
				limit = {
					is_landed = yes
					PREV = {
						OR = {
							# Warcraft
							has_quest = quest_drain_soul_ruler

							has_quest = quest_the_devil_worshipers_sacrifice_ruler
						}
					}
				}
				PREV = {
					show_scope_change = no

					# Warcraft
					if = {
						limit = { has_quest = quest_drain_soul_ruler }
						clr_quest = quest_drain_soul_ruler
					}

					if = {
						limit = { has_quest = quest_the_devil_worshipers_sacrifice_ruler }
						clr_quest = quest_the_devil_worshipers_sacrifice_ruler
					}

					# Warcraft
					add_society_currency_medium_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_female } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_male } }
				}
				break = yes
			}
			#No quest so add default
			PREV = {
				show_scope_change = no
				add_society_currency_minor_effect = yes
			}
			trigger_switch = {
				on_trigger = is_female
				yes = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_female } }
				no = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_male } }
			}
			break = yes
		}
		#Child
		if = {
			limit  = {
				NOT = { age = 16 }
			}
			hidden_effect = {
				PREV = {
					# Warcraft
					if = {
						limit = { society_member_of = shadow_council }
						character_event = { id = WCCLS.605 }
					}
					else = { character_event = { id = MNM.7503 } }
				}
			}
			#Check quests to resolve, add extra currency and play special sound effect
			if = { #Virgin
				limit = {
					is_virgin_trigger = yes
					PREV = {
						OR = {
							# Warcraft
							has_quest = quest_drain_soul_virgin

							has_quest = quest_the_devil_worshipers_sacrifice_virgin
						}
					}
				}
				PREV = {
					show_scope_change = no

					# Warcraft
					if = {
						limit = { has_quest = quest_drain_soul_virgin }
						clr_quest = quest_drain_soul_virgin
					}

					if = {
						limit = { has_quest = quest_the_devil_worshipers_sacrifice_virgin }
						clr_quest = quest_the_devil_worshipers_sacrifice_virgin
					}

					# Warcraft
					add_society_currency_minor_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_virgin_female } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_virgin_male } }
				}
				break = yes
			}
			if = { #Priestly
				limit = {
					# Warcraft
					dark_public_religion_trigger = no
					secular_public_religion_trigger = no

					OR = {
						is_priest = yes
						is_ascetic_trigger = yes
					}
					PREV = {
						OR = {
							# Warcraft
							has_quest = quest_drain_soul_holy_person

							has_quest = quest_the_devil_worshipers_sacrifice_holy_person
						}
					}
				}
				PREV = {
					show_scope_change = no

					# Warcraft
					if = {
						limit = { has_quest = quest_drain_soul_holy_person }
						clr_quest = quest_drain_soul_holy_person
					}

					if = {
						limit = { has_quest = quest_the_devil_worshipers_sacrifice_holy_person }
						clr_quest = quest_the_devil_worshipers_sacrifice_holy_person
					}

					# Warcraft
					add_society_currency_minor_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_holy_woman } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_holy_man } }
				}
				break = yes
			}
			if = { #Dwarf
				limit = {
					trait = dwarf
					PREV = { has_quest = quest_the_devil_worshipers_sacrifice_dwarf }
				}
				PREV = {
					show_scope_change = no
					clr_quest = quest_the_devil_worshipers_sacrifice_dwarf

					# Warcraft
					add_society_currency_minor_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_dwarf_female } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_dwarf_male } }
				}
				break = yes
			}
			if = { #Ruler
				limit = {
					is_landed = yes
					PREV = {
						OR = {
							# Warcraft
							has_quest = quest_drain_soul_ruler

							has_quest = quest_the_devil_worshipers_sacrifice_ruler
						}
					}
				}
				PREV = {
					show_scope_change = no

					# Warcraft
					if = {
						limit = { has_quest = quest_drain_soul_ruler }
						clr_quest = quest_drain_soul_ruler
					}

					if = {
						limit = { has_quest = quest_the_devil_worshipers_sacrifice_ruler }
						clr_quest = quest_the_devil_worshipers_sacrifice_ruler
					}

					# Warcraft
					add_society_currency_minor_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_female } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_male } }
				}
				break = yes
			}
			#No quest so add default
			PREV = {
				show_scope_change = no
				add_society_currency_trivial_effect = yes
			}
			trigger_switch = {
				on_trigger = is_female
				yes = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_female } }
				no = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_male } }
			}
			break = yes
		}
		#Virgin
		if = {
			limit  = {
				is_virgin_trigger = yes
			}
			hidden_effect = {
				PREV = {
					# Warcraft
					if = {
						limit = { society_member_of = shadow_council }
						character_event = { id = WCCLS.605 }
					}
					else = { character_event = { id = MNM.7504 } }
				}
			}
			#Check quests to resolve, add extra currency and play special sound effect
			if = { #Virgin
				limit = {
					is_virgin_trigger = yes
					PREV = {
						OR = {
							# Warcraft
							has_quest = quest_drain_soul_virgin

							has_quest = quest_the_devil_worshipers_sacrifice_virgin
						}
					}
				}
				PREV = {
					show_scope_change = no

					# Warcraft
					if = {
						limit = { has_quest = quest_drain_soul_virgin }
						clr_quest = quest_drain_soul_virgin
					}

					if = {
						limit = { has_quest = quest_the_devil_worshipers_sacrifice_virgin }
						clr_quest = quest_the_devil_worshipers_sacrifice_virgin
					}

					# Warcraft
					add_society_currency_minor_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_virgin_female } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_virgin_male } }
				}
				break = yes
			}
			if = { #Priestly
				limit = {
					# Warcraft
					dark_public_religion_trigger = no
					secular_public_religion_trigger = no

					OR = {
						is_priest = yes
						is_ascetic_trigger = yes
					}
					PREV = {
						OR = {
							# Warcraft
							has_quest = quest_drain_soul_holy_person

							has_quest = quest_the_devil_worshipers_sacrifice_holy_person
						}
					}
				}
				PREV = {
					show_scope_change = no

					# Warcraft
					if = {
						limit = { has_quest = quest_drain_soul_holy_person }
						clr_quest = quest_drain_soul_holy_person
					}

					if = {
						limit = { has_quest = quest_the_devil_worshipers_sacrifice_holy_person }
						clr_quest = quest_the_devil_worshipers_sacrifice_holy_person
					}

					# Warcraft
					add_society_currency_minor_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_holy_woman } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_holy_man } }
				}
				break = yes
			}
			if = { #Dwarf
				limit = {
					trait = dwarf
					PREV = { has_quest = quest_the_devil_worshipers_sacrifice_dwarf }
				}
				PREV = {
					show_scope_change = no
					clr_quest = quest_the_devil_worshipers_sacrifice_dwarf

					# Warcraft
					add_society_currency_minor_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_dwarf_female } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_dwarf_male } }
				}
				break = yes
			}
			if = { #Ruler
				limit = {
					is_landed = yes
					PREV = {
						OR = {
							# Warcraft
							has_quest = quest_drain_soul_ruler

							has_quest = quest_the_devil_worshipers_sacrifice_ruler
						}
					}
				}
				PREV = {
					show_scope_change = no

					# Warcraft
					if = {
						limit = { has_quest = quest_drain_soul_ruler }
						clr_quest = quest_drain_soul_ruler
					}

					if = {
						limit = { has_quest = quest_the_devil_worshipers_sacrifice_ruler }
						clr_quest = quest_the_devil_worshipers_sacrifice_ruler
					}

					# Warcraft
					add_society_currency_minor_and_chance_to_get_artifact_effect = yes

				}
				trigger_switch = {
					on_trigger = is_female
					yes = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_female } }
					no = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_male } }
				}
				break = yes
			}
			#No quest so add default
			PREV = {
				show_scope_change = no
				add_society_currency_trivial_effect = yes
			}
			trigger_switch = {
				on_trigger = is_female
				yes = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_female } }
				no = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_male } }
			}
			break = yes
		}
		#Regular character
		hidden_effect = {
			PREV = {
				# Warcraft
				if = {
					limit = { society_member_of = shadow_council }
					character_event = { id = WCCLS.605 }
				}
				else = { character_event = { id = MNM.7505 } }
			}
		}
		#Check quests to resolve, add extra currency and play special sound effect
		if = { #Virgin
			limit = {
				is_virgin_trigger = yes
				PREV = {
					OR = {
						# Warcraft
						has_quest = quest_drain_soul_virgin

						has_quest = quest_the_devil_worshipers_sacrifice_virgin
					}
				}
			}
			PREV = {
				show_scope_change = no

				# Warcraft
				if = {
					limit = { has_quest = quest_drain_soul_virgin }
					clr_quest = quest_drain_soul_virgin
				}

				if = {
					limit = { has_quest = quest_the_devil_worshipers_sacrifice_virgin }
					clr_quest = quest_the_devil_worshipers_sacrifice_virgin
				}

				# Warcraft
				add_society_currency_minor_and_chance_to_get_artifact_effect = yes

			}
			trigger_switch = {
				on_trigger = is_female
				yes = { PREV = { sound_effect = devil_worshippers_sacrifice_virgin_female } }
				no = { PREV = { sound_effect = devil_worshippers_sacrifice_virgin_male } }
			}
			break = yes
		}
		if = { #Priestly
			limit = {
				# Warcraft
				dark_public_religion_trigger = no
				secular_public_religion_trigger = no

				OR = {
					is_priest = yes
					is_ascetic_trigger = yes
				}
				PREV = {
					OR = {
						# Warcraft
						has_quest = quest_drain_soul_holy_person

						has_quest = quest_the_devil_worshipers_sacrifice_holy_person
					}
				}
			}
			PREV = {
				show_scope_change = no

				# Warcraft
				if = {
					limit = { has_quest = quest_drain_soul_holy_person }
					clr_quest = quest_drain_soul_holy_person
				}

				if = {
					limit = { has_quest = quest_the_devil_worshipers_sacrifice_holy_person }
					clr_quest = quest_the_devil_worshipers_sacrifice_holy_person
				}

				# Warcraft
				add_society_currency_minor_and_chance_to_get_artifact_effect = yes

			}
			trigger_switch = {
				on_trigger = is_female
				yes = { PREV = { sound_effect = devil_worshippers_sacrifice_holy_woman } }
				no = { PREV = { sound_effect = devil_worshippers_sacrifice_holy_man } }
			}
			break = yes
		}
		if = { #Dwarf
			limit = {
				trait = dwarf
				PREV = { has_quest = quest_the_devil_worshipers_sacrifice_dwarf }
			}
			PREV = {
				show_scope_change = no
				clr_quest = quest_the_devil_worshipers_sacrifice_dwarf

				# Warcraft
				add_society_currency_minor_and_chance_to_get_artifact_effect = yes

			}
			trigger_switch = {
				on_trigger = is_female
				yes = { PREV = { sound_effect = devil_worshippers_sacrifice_dwarf_female } }
				no = { PREV = { sound_effect = devil_worshippers_sacrifice_dwarf_male } }
			}
			break = yes
		}
		if = { #Ruler
			limit = {
				is_landed = yes
				PREV = {
					OR = {
						# Warcraft
						has_quest = quest_drain_soul_ruler

						has_quest = quest_the_devil_worshipers_sacrifice_ruler
					}
				}
			}
			PREV = {
				show_scope_change = no

				# Warcraft
				if = {
					limit = { has_quest = quest_drain_soul_ruler }
					clr_quest = quest_drain_soul_ruler
				}

				if = {
					limit = { has_quest = quest_the_devil_worshipers_sacrifice_ruler }
					clr_quest = quest_the_devil_worshipers_sacrifice_ruler
				}

				# Warcraft
				add_society_currency_minor_and_chance_to_get_artifact_effect = yes

			}
			trigger_switch = {
				on_trigger = is_female
				yes = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_female } }
				no = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_male } }
			}
			break = yes
		}
		#No quest so add default
		PREV = {
			show_scope_change = no
			add_society_currency_trivial_effect = yes
		}
		trigger_switch = {
			on_trigger = is_female
			yes = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_female } }
			no = { PREV = { sound_effect = devil_worshippers_sacrifice_ruler_male } }
		}
	}
}
ping_physician_effect = {
	if = {
		limit = { is_playable = no }
		host = {
			random_courtier_or_vassal = { #Markus doing
				limit = {
					liege = { character = PREVPREV }
					has_minor_title = title_court_physician
				}
				character_event = { id = RIP.11031 days = 1 }
			}
		}
	}
	if = {
		limit = { is_playable = yes }
		random_courtier_or_vassal = { #Markus doing
			limit = {
				has_minor_title = title_court_physician
			}
			character_event = { id = RIP.11031 days = 1 }
		}
	}
}
remone_all_non_inheritable_negative_congenital_traits_effect = {
	if = { limit = { trait = feeble } remove_trait = feeble }
	if = { limit = { trait = dull } remove_trait = dull }
	if = { limit = { trait = uncouth } remove_trait = uncouth }
}
remone_all_non_inheritable_positive_congenital_traits_effect = {
	if = { limit = { trait = robust } remove_trait = robust }
	if = { limit = { trait = sturdy } remove_trait = sturdy }
	if = { limit = { trait = shrewd } remove_trait = shrewd }
	if = { limit = { trait = groomed } remove_trait = groomed }
}
prev_complete_desecrate_this_temple_quest_instantly_effect = {
	if = {
		limit = {
			prev_desecrate_temple_holder_trigger = no
		}
		add_holding_modifier = {
			name = desecrated_temple
			years = 5
		}
		PREV = {
			show_scope_change = no
			
			sound_effect = devil_worshippers_desecrate_temple
			clr_quest = quest_devil_worshipers_desecrate_temple

			# Warcraft
			add_society_currency_medium_and_chance_to_get_artifact_effect = yes

			break = yes
		}
	}
}
# Sets portrait, race, makes marriage, saves spouse in event target
set_up_generated_spouse_effect = {
	# Warcraft
	set_prev_gfx_effect = yes
	character_event = { id = WCRAC.10 } 	# Adds race trait
	
	# Warcraft
	ROOT = {
		if = {
			limit = { is_female = no }
			prev_add_spouse_this_effect = yes
		}
		else = {
			prev_add_spouse_matrilineal_this_effect = yes
		}
	}
	
	# Warcraft
	if = {
		limit = { is_female = no }
		save_event_target_as = father_target
	}
	else = {
		save_event_target_as = mother_target
	}
}
# Sets portrait, race, dynasty, father and mother
set_up_generated_child_effect = {
	# Warcraft
	set_prev_gfx_effect = yes
	character_event = { id = WCRAC.10 } 	# Adds race trait
	
	dynasty = ROOT
	
	# Warcraft
	set_father = event_target:father_target
	set_mother = event_target:mother_target
}
# Handles titles that control religion when converting to secret faith
handle_control_religion_titles_convert_secret_effect = {
	# Warcraft
	if = { # Tidesages are forfeit
		limit = {
			destroyable_religious_head_trigger = yes
			any_demesne_title = {
				controls_religion = yes
			}
		}
		any_demesne_title = {
			limit = {
				controls_religion = yes
			}
			# show_scope_change = no # Doesn't work... reason is unknown
			
			destroy_landed_title = THIS
		}
	}
}
empire_de_jure_includes_titles_under_effect = {
	holder_scope = {
		any_title_under = {
			limit = {
				tier = KING
				NOT = {
					empire = { has_holder = yes }
				}
			}
			de_jure_liege = PREVPREV
		}
		# For some reason, it doesn't work at all
		# Tested both mod and vanilla
		any_title_under = {
			limit = {
				tier = DUKE
				location = {
					kingdom = {
						NOT = {
							empire = { has_holder = yes }
						}
						
						NOT = { de_jure_liege_or_above = PREVPREVPREVPREV }
						ROOT = {
							completely_controls = PREV
						}
					}
				}
			}
			location = {
				kingdom = {
					de_jure_liege = PREVPREVPREVPREV
				}
			}
		}
	}
}

add_prev_religious_branch_effect = {
	if = {
		limit = {
			OR = {
				religion = mystery_of_the_makers
				religion = suntouched
			}
		}
		if = {
			limit = { PREV = { trait = storms_branch } }
			add_trait = storms_branch
		}
		else_if = {
			limit = { PREV = { trait = gears_branch } }
			add_trait = gears_branch
		}
		else_if = {
			limit = { PREV = { trait = rocks_branch } }
			add_trait = rocks_branch
		}
	}
	else_if = {
		limit = { religion = kaldorei_religion }
		if = {
			limit = { PREV = { trait = light_elune_branch } }
			add_light_elune_branch_effect = yes
		}
		else_if = {
			limit = { PREV = { trait = dark_elune_branch } }
			add_dark_elune_branch_effect = yes
		}
	}
	else_if = {
		limit = { has_religion_feature = religion_no_leader }
		if = {
			limit = { PREV = { trait = pagan_branch_1 } }
			add_trait = pagan_branch_1
		}
		else_if = {
			limit = { PREV = { trait = pagan_branch_2 } }
			add_trait = pagan_branch_2
		}
		else_if = {
			limit = { PREV = { trait = pagan_branch_3 } }
			add_trait = pagan_branch_3
		}
		else_if = {
			limit = { PREV = { trait = pagan_branch_4 } }
			add_trait = pagan_branch_4
		}
	}
}
add_random_religious_branch_effect = {
	if = {
		limit = {
			OR = {
				religion = mystery_of_the_makers
				religion = suntouched
			}
		}
		random_list = {
			10 = {
				add_trait = storms_branch
				modifier = {
					factor = 2
					this_is_warrior_culture_trigger = yes
				}
				martial_score = yes
			}
			10 = {
				add_trait = gears_branch
				modifier = {
					factor = 2
					this_is_spiritual_culture_trigger = yes
				}
				learning_score = yes
			}
			10 = {
				add_trait = rocks_branch
				modifier = {
					factor = 2
					this_is_stewardship_culture_trigger = yes
				}
				stewardship_score = yes
			}
		}
	}
	else_if = {
		limit = { religion = kaldorei_religion }
		random_list = {
			10 = {
				add_light_elune_branch_effect = yes
				diplomacy_score = yes
				learning_score = yes
				
				prefers_light_elune_branch_score = yes
			}
			10 = {
				add_dark_elune_branch_effect = yes
				martial_score = yes
				intrigue_score = yes
				
				prefers_dark_elune_branch_score = yes
			}
		}
	}
	else_if = {
		limit = { has_religion_feature = religion_no_leader }
		random_list = {
			5 = { add_trait = pagan_branch_1 }
			25 = { add_trait = pagan_branch_2 }
			25 = { add_trait = pagan_branch_3 }
			25 = { add_trait = pagan_branch_4 }
		}
	}
}
add_prev_religious_branch_or_random_effect = {
	random_list = {
		50 = {
			trigger = {
				is_playable = no
				PREV = { religion_has_branches_trigger = yes }
			}
			add_prev_religious_branch_effect = yes
		}
		50 = {
			add_random_religious_branch_effect = yes
		}
	}
}

# Heal traits
heal_one_handed_effect = {
	remove_trait = one_handed
	if = {
		limit = {
			has_artifact = prosthetic_hand_gold
		}
		destroy_artifact = prosthetic_hand_gold
		wealth = 10
	}
	if = {
		limit = {
			has_artifact = prosthetic_hand_metal
		}
		destroy_artifact = prosthetic_hand_metal
	}
	if = {
		limit = {
			has_character_modifier = phantom_pain
			NOT = { trait = one_eyed }
			NOT = { trait = one_legged }
			NOT = { trait = disfigured }
		}
		remove_character_modifier = phantom_pain
	}
}
heal_one_eyed_effect = {
	remove_trait = one_eyed
	if = {
		limit = {
			has_character_modifier = glass_eye
		}
		remove_character_modifier = glass_eye
	}
	if = {
		limit = {
			has_character_modifier = phantom_pain
			NOT = { trait = one_handed }
			NOT = { trait = one_legged }
			NOT = { trait = disfigured }
		}
		remove_character_modifier = phantom_pain
	}
}
heal_one_legged_effect = {
	remove_trait = one_legged
	if = {
		limit = {
			has_character_modifier = peg_leg
		}
		remove_character_modifier = peg_leg
	}
	if = {
		limit = {
			has_artifact = prosthetic_leg_artifact
		}
		destroy_artifact = prosthetic_leg_artifact
	}
	if = {
		limit = {
			has_character_modifier = phantom_pain
			NOT = { trait = one_handed }
			NOT = { trait = one_eyed }
			NOT = { trait = disfigured }
		}
		remove_character_modifier = phantom_pain
	}
}
heal_disfigured_effect = {
	remove_trait = disfigured
	if = {
		limit = {
			has_character_modifier = golden_mask
		}
		remove_character_modifier = golden_mask
		wealth = 10
	}
	if = {
		limit = {
			has_character_modifier = phantom_pain
			NOT = { trait = one_handed }
			NOT = { trait = one_legged }
			NOT = { trait = one_eyed }
		}
		remove_character_modifier = phantom_pain
	}
}
heal_flagged_disease_effect = {
	#Warcraft
	if = {
		limit = { has_character_flag = removing_corrupted_blood }
		remove_trait = corrupted_blood
		set_character_flag = immune_corrupted_blood
	}

	if = {
		limit = { has_character_flag = removing_flu }
		remove_trait = flu
	}
	if = {
		limit = { has_character_flag = removing_measles }
		remove_trait = has_measles
		set_character_flag = immune_measles
	}
	if = {
		limit = { has_character_flag = removing_food_poisoning }
		remove_trait = food_poisoning
	}
	if = {
		limit = { has_character_flag = removing_gout }
		remove_trait = gout
	}
	if = {
		limit = { has_character_flag = removing_scurvy }
		remove_trait = scurvy
	}
	if = {
		limit = { has_character_flag = removing_lovers_pox }
		remove_trait = lovers_pox
	}
	if = {
		limit = { has_character_flag = removing_cancer }
		remove_trait = cancer
	}
	if = {
		limit = { has_character_flag = removing_pneumonic }
		remove_trait = pneumonic
	}
	if = {
		limit = { has_character_flag = removing_syphilitic }
		remove_trait = syphilitic
		set_character_flag = immune_syphilis
	}
	if = {
		limit = { has_character_flag = removing_leper }
		remove_trait = leper
	}
	if = {
		limit = { has_character_flag = removing_has_tuberculosis }
		remove_trait = has_tuberculosis
		set_character_flag = immune_tuberculosis
	}
	if = {
		limit = { has_character_flag = removing_has_aztec_disease }
		remove_trait = has_aztec_disease
		set_character_flag = immune_aztec_disease
	}
	if = {
		limit = { has_character_flag = removing_has_small_pox }
		remove_trait = has_small_pox
		set_character_flag = immune_smallpox
	}
	if = {
		limit = { has_character_flag = removing_has_bubonic_plague }
		remove_trait = has_bubonic_plague
		set_character_flag = immune_bubonic_plague
	}
	if = {
		limit = { has_character_flag = removing_has_typhus }
		remove_trait = has_typhus
		set_character_flag = immune_typhus
	}
	if = {
		limit = { has_character_flag = removing_has_typhoid_fever }
		remove_trait = has_typhoid_fever
		set_character_flag = immune_typhoid_fever
	}

	# Warcraft
	clr_character_flag = removing_corrupted_blood

	clr_character_flag = removing_flu
	clr_character_flag = removing_measles
	clr_character_flag = removing_food_poisoning
	clr_character_flag = removing_gout
	clr_character_flag = removing_scurvy
	clr_character_flag = removing_lovers_pox
	clr_character_flag = removing_cancer
	clr_character_flag = removing_leper
	clr_character_flag = removing_has_tuberculosis
	clr_character_flag = removing_has_aztec_disease
	clr_character_flag = removing_has_small_pox
	clr_character_flag = removing_has_bubonic_plague
	clr_character_flag = removing_has_typhus
	clr_character_flag = removing_has_typhoid_fever
}
heal_flagged_maim_or_healable_disability_effect = {
	if = {
		limit = { has_character_flag = dark_healing_infirm }
		remove_trait = infirm
	}
	if = {
		limit = { has_character_flag = dark_healing_blinded }
		remove_trait = blinded
	}
	if = {
		limit = { has_character_flag = dark_healing_incapable }
		remove_trait = incapable
	}
	if = {
		limit = { has_character_flag = dark_healing_eunuch }
		remove_trait = eunuch
	}
	if = {
		limit = { NOT = { has_dlc = "Reapers" } has_character_flag = dark_healing_maimed_healed }
		remove_trait = maimed
	}
	if = {
		limit = { has_character_flag = removed_maimed }
		remove_trait = maimed
	}
	if = {
		limit = { has_character_flag = removed_mangled }
		remove_trait = mangled
	}
	if = {
		limit = { has_character_flag = removed_one_eyed }
		heal_one_eyed_effect = yes
	}
	if = {
		limit = { has_character_flag = removed_one_handed }
		heal_one_handed_effect = yes
	}
	if = {
		limit = { has_character_flag = removed_one_legged }
		heal_one_legged_effect = yes
	}
	if = {
		limit = { has_character_flag = removed_disfigured }
		heal_disfigured_effect = yes
	}
	
	clr_character_flag = dark_healing_infirm
	clr_character_flag = dark_healing_blinded
	clr_character_flag = dark_healing_incapable
	clr_character_flag = dark_healing_eunuch
	clr_character_flag = dark_healing_maimed_healed
	clr_character_flag = removed_maimed
	clr_character_flag = removed_mangled
	clr_character_flag = removed_one_eyed
	clr_character_flag = removed_one_handed
	clr_character_flag = removed_one_legged
	clr_character_flag = removed_disfigured
}
heal_all_diseases = {
	hidden_effect = { remove_trait = infection }
	if = { limit = { trait = lovers_pox } remove_trait = lovers_pox }
	remove_disease_trait_effect = yes
	remove_symptoms_effect = yes
	hidden_effect = {
		# Remove pending infection from wound prior to becoming demon
		if = {
			limit = { has_character_flag = pending_infection }
			clr_character_flag = pending_infection
		}
		remove_disease_flags_effect = yes
		remove_treatment_modifiers_effect = yes
	}
}
heal_all_maims_and_healable_disabilities_effect = {
	if = {
		limit = {
			trait = infertile
			need_infertile_trait_trigger = no
		}
		remove_trait = infertile
	}
	if = {
		limit = { trait = infirm }
		remove_trait = infirm
	}
	if = {
		limit = { trait = blinded }
		remove_trait = blinded
	}
	if = {
		limit = { trait = incapable }
		remove_trait = incapable
	}
	if = {
		limit = { trait = eunuch }
		remove_trait = eunuch
	}
	if = {
		limit = { trait = maimed }
		remove_trait = maimed
	}
	if = {
		limit = { trait = mangled }
		remove_trait = mangled
	}
	if = {
		limit = { trait = one_eyed }
		heal_one_eyed_effect = yes
	}
	if = {
		limit = { trait = one_handed }
		heal_one_handed_effect = yes
	}
	if = {
		limit = { trait = one_legged }
		heal_one_legged_effect = yes
	}
	if = {
		limit = { trait = disfigured }
		heal_disfigured_effect = yes
	}
}
remove_all_positive_congenital_traits_effect = {
	if = {
		limit = { trait = twoheaded }
		remove_trait = twoheaded
	}
	if = {
		limit = { trait = strong }
		remove_trait = strong
	}
	if = {
		limit = { trait = fair }
		remove_trait = fair
	}
	if = {
		limit = { trait = quick }
		remove_trait = quick
	}
	if = {
		limit = { trait = genius }
		remove_trait = genius
	}
}

set_true_cognatic_succession_effect = {
	if = {
		limit = {
			NOT = {
				holder_scope = { government = hive_government }
				OR = {
					has_law = enatic_succession
					has_law = enatic_cognatic_succession
				}
			}
		}
		add_law = {
			law = true_cognatic_succession
			cooldown = no
			opinion_effect = no
		}
	}
}

spawn_diplomacy_mystic_effect = {
	create_character = {
		random_traits = no
		name = "Anveena"
		dna = chaehghfacw
		dynasty = none
		religion = holy_light
		culture = hillsbrad
		female = yes
		age = 17
		health = 15
		trait = grey_eminence
		trait = gregarious
		trait = mystic
		trait = lustful
		trait = charitable
		trait = fair
		trait = trusting
		trait = poet
	}
	new_character = {
		hidden_effect = {
			set_character_flag = eternal_life_mystic 

			will_not_marry_effect = yes

			give_nickname = nick_the_youthful
			random_list = {
				90 = {
					set_character_flag = mystic_is_fraud
				}
				10 = {
					modifier = {
						factor = 1.4
						FROM = { diplomacy = 10 }
					}
					modifier = {
						factor = 1.4
						FROM = { diplomacy = 13 }
					}
					modifier = {
						factor = 1.4
						FROM = { diplomacy = 16 }
					}
					modifier = {
						factor = 1.4
						FROM = { diplomacy = 19 }
					}
					modifier = {
						factor = 1.4
						FROM = { diplomacy = 22 }
					}
					
					change_diplomacy = 6
				}
			}
			save_event_target_as = eternal_life_mystic
		}
	}
}
spawn_martial_mystic_effect = {
	create_character = {
		random_traits = no
		dynasty = none
		religion = cult_of_loa
		culture = zandalari
		female = yes
		age = 36
		health = 15
		trait = brilliant_strategist
		trait = mystic
		trait = robust
		trait = wroth
		trait = diligent
		trait = proud
		trait = brave
		trait = aggressive_leader
	}
	new_character = {
		hidden_effect = {
			set_character_flag = eternal_life_mystic 

			will_not_marry_effect = yes

			give_nickname = nick_the_fearless 

			random_list = {
				50 = { add_scarred_high_effect = yes }
				50 = { add_trait = disfigured }
			}

			random_list = {
				90 = {
					set_character_flag = mystic_is_fraud
				}
				10 = {
					modifier = {
						factor = 1.4
						FROM = { martial = 10 }
					}
					modifier = {
						factor = 1.4
						FROM = { martial = 13 }
					}
					modifier = {
						factor = 1.4
						FROM = { martial = 16 }
					}
					modifier = {
						factor = 1.4
						FROM = { martial = 19 }
					}
					modifier = {
						factor = 1.4
						FROM = { martial = 22 }
					}
					
					change_martial = 6
				}
			}
			save_event_target_as = eternal_life_mystic
		}
	}
}
spawn_intrigue_mystic_effect = {
	create_character = {
		random_traits = no
		dynasty = none
		religion = cult_of_wealth
		culture = goblin
		female = yes
		age = 72
		health = 15
		trait = elusive_shadow
		trait = mystic
		trait = hunchback
		trait = slothful
		trait = proud
		trait = paranoid
		trait = ambitious
		trait = deceitful
		trait = erudite


	}
	new_character = {
		hidden_effect = {
			set_character_flag = eternal_life_mystic 

			will_not_marry_effect = yes

			give_nickname = nick_the_alchemist

			random_list = {
				90 = {
					set_character_flag = mystic_is_fraud
				}
				10 = {
					modifier = {
						factor = 1.4
						FROM = { intrigue = 10 }
					}
					modifier = {
						factor = 1.4
						FROM = { intrigue = 13 }
					}
					modifier = {
						factor = 1.4
						FROM = { intrigue = 16 }
					}
					modifier = {
						factor = 1.4
						FROM = { intrigue = 19 }
					}
					modifier = {
						factor = 1.4
						FROM = { intrigue = 22 }
					}
					
					change_intrigue = 6
				}
			}
			save_event_target_as = eternal_life_mystic
		}
	}
}
spawn_learning_mystic_effect = {
	create_character = {
		name = "Lazul"
		random_traits = no
		dynasty = none
		religion = cult_of_loa
		culture = gurubashi
		female = yes
		age = 9
		health = 15
		trait = mystic
		trait = quick
		trait = fussy
		trait = conscientious
	}
	new_character = {
		hidden_effect = {
			set_character_flag = eternal_life_mystic 

			will_not_marry_effect = yes

			give_nickname = nick_the_gentle
			change_diplomacy = 2
			change_stewardship = 2
			change_intrigue = -1

			random_list = {
				90 = {
					set_character_flag = mystic_is_fraud
				}
				10 = {
					modifier = {
						factor = 1.4
						FROM = { learning = 10 }
					}
					modifier = {
						factor = 1.4
						FROM = { learning = 13 }
					}
					modifier = {
						factor = 1.4
						FROM = { learning = 16 }
					}
					modifier = {
						factor = 1.4
						FROM = { learning = 19 }
					}
					modifier = {
						factor = 1.4
						FROM = { learning = 22 }
					}
					
					change_learning = 15
				}
			}
			save_event_target_as = eternal_life_mystic
		}
	}
}

remove_stressed_and_depressed_effect = {
	if = { 
		limit = { trait = stressed }
		remove_trait = stressed
	}
	if = { 
		limit = { trait = depressed }
		remove_trait = depressed
	}
	if = {
		limit = { has_character_modifier = apathetic }
		remove_character_modifier = apathetic
	}
}

clr_hunting_animal_flag_effect = {
	clr_character_flag = white_stag
	clr_character_flag = white_bear
	clr_character_flag = white_tiger
	clr_character_flag = white_lion
}