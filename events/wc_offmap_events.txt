namespace = WCOME

character_event = {
	id = WCOME.10
	desc = {
		trigger = {
			has_character_modifier = follower_of_cthun
		}
		text = EVTDESC_WCOME_cthun.10
		picture = GFX_evt_cthun
	}
	desc = {
		trigger = {
			has_character_modifier = follower_of_nzoth
		}
		text = EVTDESC_WCOME_nzoth.10
		picture = GFX_evt_nzoth
	}
	desc = {
		trigger = {
			has_character_modifier = follower_of_yogg_saron
		}
		text = EVTDESC_WCOME_yoggsaron.10
		picture = GFX_evt_yogg_saron
	}
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name= {
			text = EVTOPTA_WCOME_cthun.10
			trigger = {
				has_character_modifier = follower_of_cthun
			}
		}
		name= {
			text = EVTOPTA_WCOME_nzoth.10
			trigger = {
				has_character_modifier = follower_of_nzoth
			}
		}
		name= {
			text = EVTOPTA_WCOME_yoggsaron.10
			trigger = {
				has_character_modifier = follower_of_yogg_saron
			}
		}

		if = {
			limit = {
				has_character_modifier = follower_of_cthun
			}
			spawn_cthun_follower_troops_effect = yes
		}
		if = {
			limit = {
				has_character_modifier = follower_of_nzoth
			}
			spawn_nzoth_follower_troops_effect = yes
		}
		if = {
			limit = {
				has_character_modifier = follower_of_yogg_saron
			}
			spawn_yogg_saron_follower_troops_effect = yes
		}
	}
}
character_event = {
	id = WCOME.11
	desc = {
		trigger = {
			has_character_modifier = follower_of_cthun
		}
		text = EVTDESC_WCOME_cthun.11
		picture = GFX_evt_cthun
	}

	desc = {
		trigger = {
			has_character_modifier = follower_of_nzoth
		}
		text = EVTDESC_WCOME_nzoth.11
		picture = GFX_evt_nzoth
	}
	desc = {
		trigger = {
			has_character_modifier = follower_of_yogg_saron
		}
		text = EVTDESC_WCOME_yoggsaron.11
		picture = GFX_evt_yogg_saron
	}
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name= {
			text = EVTOPTA_WCOME_cthun.11
			trigger = {
				has_character_modifier = follower_of_cthun
			}
		}
		name= {
			text = EVTOPTA_WCOME_nzoth.11
			trigger = {
				has_character_modifier = follower_of_nzoth
			}
		}
		name= {
			text = EVTOPTA_WCOME_yoggsaron.11
			trigger = {
				has_character_modifier = follower_of_yogg_saron
			}
		}

		if = {
			limit = {
				has_character_modifier = follower_of_cthun
			}
			spawn_cthun_follower_troops_effect = yes
			spawn_cthun_follower_troops_effect = yes
		}
		if = {
			limit = {
				has_character_modifier = follower_of_nzoth
			}
			spawn_nzoth_follower_troops_effect = yes
			spawn_nzoth_follower_troops_effect = yes
		}
		if = {
			limit = {
				has_character_modifier = follower_of_yogg_saron
			}
			spawn_yogg_saron_follower_troops_effect = yes
			spawn_yogg_saron_follower_troops_effect = yes
		}
	}
}
character_event = {
	id = WCOME.12
	desc = {
		trigger = {
			has_character_modifier = follower_of_cthun
		}
		text = EVTDESC_WCOME_cthun.12
		picture = GFX_evt_cthun
	}

	desc = {
		trigger = {
			has_character_modifier = follower_of_nzoth
		}
		text = EVTDESC_WCOME_nzoth.12
		picture = GFX_evt_nzoth
	}
	desc = {
		trigger = {
			has_character_modifier = follower_of_yogg_saron
		}
		text = EVTDESC_WCOME_yoggsaron.12
		picture = GFX_evt_yogg_saron
	}
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name= {
			text = EVTOPTA_WCOME_cthun.12
			trigger = {
				has_character_modifier = follower_of_cthun
			}
		}
		name= {
			text = EVTOPTA_WCOME_nzoth.12
			trigger = {
				has_character_modifier = follower_of_nzoth
			}
		}
		name= {
			text = EVTOPTA_WCOME_yoggsaron.12
			trigger = {
				has_character_modifier = follower_of_yogg_saron
			}
		}

		if = {
			limit = {
				has_character_modifier = follower_of_cthun
			}
			spawn_cthun_follower_troops_effect = yes
			spawn_cthun_follower_troops_effect = yes
			spawn_cthun_follower_troops_effect = yes
		}
		if = {
			limit = {
				has_character_modifier = follower_of_nzoth
			}
			spawn_nzoth_follower_troops_effect = yes
			spawn_nzoth_follower_troops_effect = yes
			spawn_nzoth_follower_troops_effect = yes
		}
		if = {
			limit = {
				has_character_modifier = follower_of_yogg_saron
			}
			spawn_yogg_saron_follower_troops_effect = yes
			spawn_yogg_saron_follower_troops_effect = yes
			spawn_yogg_saron_follower_troops_effect = yes
		}
	}
}
character_event = {
	id = WCOME.20
	picture = GFX_evt_cthun
	desc = EVTDESC_WCOME.20
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes

	immediate = {
		random_list = {
			40 = {
				create_character = {
					dynasty = none
					religion = old_gods_worship
					culture = nraqi
					female = no
					age = 1000000
					attributes = {
						martial=5 diplomacy=5 stewardship=5 intrigue=5 learning=5
					}
					random_traits = yes
					trait = creature_nraqi
					trait = brilliant_strategist
					trait = cruel
					trait = patient
					trait = being_void
				}
			}
			60 = {
				create_character = {
					dynasty = none
					religion = old_gods_worship
					culture = qiraji
					female = no
					age = 300
					attributes = {
						martial=5 diplomacy=5 stewardship=5 intrigue=5 learning=5
					}
					random_traits = yes
					trait = creature_qiraji
					trait = brilliant_strategist
					trait = cruel
					trait = patient
					trait = being_void
				}
			}
		}
		new_character = {
			random_list = {
				50 = {
					add_trait = class_warrior_6
				}
				30 = {
					add_trait = class_warrior_5
				}
				20 = {
					add_trait = class_warrior_7
				}
			}
			# Removes wrong traits
			remove_trait = chaste
			remove_trait = kind
			remove_trait = charitable
			remove_trait = humble
			remove_trait = honest
			remove_trait = zealous
			remove_trait = trusting
			remove_trait = craven
			save_event_target_as = target_general
		}
	}

	option = {
		name = EVTOPTA_WCOME.20
		# reverse_opinion = { modifier = opinion_loyal_servant who = event_target:target_general }
	}
}

character_event = {
	id = WCOME.21
	picture = GFX_evt_nzoth
	desc = EVTDESC_WCOME.21
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes

	immediate = {
		random_list = {
			40 = {
				create_character = {
					dynasty = none
					religion = old_gods_worship
					culture = nraqi
					female = no
					age = 1000000
					attributes = {
						martial=5 diplomacy=5 stewardship=5 intrigue=5 learning=5
					}
					random_traits = yes
					trait = creature_nraqi
					trait = brilliant_strategist
					trait = cruel
					trait = patient
					trait = being_void
				}
			}
			60 = {
				create_character = {
					dynasty = none
					religion = old_gods_worship
					culture = naga
					female = no
					age = 500
					attributes = {
						martial=5 diplomacy=5 stewardship=5 intrigue=5 learning=5
					}
					random_traits = yes
					trait = creature_naga
					trait = brilliant_strategist
					trait = cruel
					trait = patient
					trait = being_void
				}
			}
		}
		new_character = {
			random_list = {
				50 = {
					add_trait = class_warrior_6
				}
				30 = {
					add_trait = class_warrior_5
				}
				20 = {
					add_trait = class_warrior_7
				}
			}
			# Removes wrong traits
			remove_trait = chaste
			remove_trait = kind
			remove_trait = charitable
			remove_trait = humble
			remove_trait = honest
			remove_trait = zealous
			remove_trait = trusting
			remove_trait = craven
			save_event_target_as = target_general
		}
	}

	option = {
		name = EVTOPTA_WCOME.21
		# reverse_opinion = { modifier = opinion_loyal_servant who = event_target:target_general }
	}
}
character_event = {
	id = WCOME.22
	picture = GFX_evt_yogg_saron
	desc = EVTDESC_WCOME.22
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes

	immediate = {
		random_list = {
			60 = {
				create_character = {
					dynasty = none
					religion = old_gods_worship
					culture = nraqi
					female = no
					age = 1000000
					attributes = {
						martial=5 diplomacy=5 stewardship=5 intrigue=5 learning=5
					}
					random_traits = yes
					trait = creature_nraqi
					trait = brilliant_strategist
					trait = cruel
					trait = patient
					trait = being_void
				}
			}
			40 = {
				create_character = {
					dynasty = none
					religion = old_gods_worship
					culture = titanforged
					female = no
					age = 1000
					attributes = {
						martial=5 diplomacy=5 stewardship=5 intrigue=5 learning=5
					}
					random_traits = yes
					trait = creature_watcher
					trait = brilliant_strategist
					trait = cruel
					trait = patient
					trait = being_void
				}
			}
		}
		new_character = {
			random_list = {
				50 = {
					add_trait = class_warrior_6
				}
				30 = {
					add_trait = class_warrior_5
				}
				20 = {
					add_trait = class_warrior_7
				}
			}
			# Removes wrong traits
			remove_trait = chaste
			remove_trait = kind
			remove_trait = charitable
			remove_trait = humble
			remove_trait = honest
			remove_trait = zealous
			remove_trait = trusting
			remove_trait = craven
			save_event_target_as = target_general
		}
	}

	option = {
		name = EVTOPTA_WCOME.22
		# reverse_opinion = { modifier = opinion_loyal_servant who = event_target:target_general }
	}
}
character_event = {
	id = WCOME.25
	picture = GFX_evt_cthun
	desc = EVTDESC_WCOME.25
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes

	immediate = {
		create_character = {
			dynasty = none
			religion = old_gods_worship
			culture = nraqi
			female = no
			age = 1000000
			attributes = {
				martial=10 diplomacy=5 stewardship=5 intrigue=5 learning=5
			}
			random_traits = yes
			trait = creature_cthraxxi
			trait = brilliant_strategist
			trait = cruel
			trait = patient
			trait = being_void
		}
		new_character = {
			random_list = {
				50 = {
					add_trait = class_warrior_6
				}
				30 = {
					add_trait = class_warrior_5
				}
				20 = {
					add_trait = class_warrior_7
				}
			}
			set_graphical_culture = cthraxxi
			# Removes wrong traits
			remove_trait = chaste
			remove_trait = kind
			remove_trait = charitable
			remove_trait = humble
			remove_trait = honest
			remove_trait = zealous
			remove_trait = trusting
			remove_trait = craven
			save_event_target_as = target_general
		}
	}

	option = {
		name = EVTOPTA_WCOME.25
		# reverse_opinion = { modifier = opinion_loyal_servant who = event_target:target_general }
	}
}
character_event = {
	id = WCOME.30
	picture = GFX_evt_cthun
	desc = EVTDESC_WCOME.30
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = EVTOPTA_WCOME.30
		hidden_tooltip = {
			remove_offmap_power_effect = yes
		}
		add_character_modifier = { name = touch_of_chaos years = 5}
		clr_character_flag = requested_offmap_power
	}
}
character_event = {
	id = WCOME.31
	picture = GFX_evt_cthun
	desc = EVTDESC_WCOME.31
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = EVTOPTA_WCOME.31
		hidden_tooltip = {
			remove_offmap_power_effect = yes
		}
		add_character_modifier = { name = touch_of_madness years = 1}
		clr_character_flag = requested_offmap_power
	}
}
character_event = {
	id = WCOME.32
	picture = GFX_evt_nzoth
	desc = EVTDESC_WCOME.32
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = EVTOPTA_WCOME.32
		hidden_tooltip = {
			remove_offmap_power_effect = yes
		}
		add_character_modifier = { name = dreams_of_deep years = 5}
		clr_character_flag = requested_offmap_power
	}
}
character_event = {
	id = WCOME.33
	picture = GFX_evt_nzoth
	desc = EVTDESC_WCOME.33
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = EVTOPTA_WCOME.33
		hidden_tooltip = {
			remove_offmap_power_effect = yes
		}
		add_character_modifier = { name = dreams_of_nyalotha years = 1}
		clr_character_flag = requested_offmap_power
	}
}
character_event = {
	id = WCOME.34
	picture = GFX_evt_yogg_saron
	desc = EVTDESC_WCOME.34
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = EVTOPTA_WCOME.34
		hidden_tooltip = {
			remove_offmap_power_effect = yes
		}
		add_character_modifier = { name = gaze_of_death years = 5}
		clr_character_flag = requested_offmap_power
	}
}
character_event = {
	id = WCOME.35
	picture = GFX_evt_yogg_saron
	desc = EVTDESC_WCOME.35
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = EVTOPTA_WCOME.35
		hidden_tooltip = {
			remove_offmap_power_effect = yes
		}
		add_character_modifier = { name = gaze_of_undeath years = 1}
		clr_character_flag = requested_offmap_power
	}
}
character_event = {
	id = WCOME.200
	desc = {
		trigger = { FROM = { location = { province_id = 2956 } } }
		text = EVTDESC_WCOME.200_cthun
		picture = GFX_evt_cthun
    }
	desc = {
		trigger = { FROM = { location = { province_id = 3545 } } }
		text = EVTDESC_WCOME.200_nzoth
		picture = GFX_evt_yogg_saron
    }
	desc = {
		trigger = { FROM = { location = { province_id = 858 } } }
		text = EVTDESC_WCOME.200_yoggsaron
		picture = GFX_evt_nzoth
    }
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	only_playable = yes
	
	trigger = {
		NOT = { religion = old_gods_worship }
		FROM = {
			location = {
				wonder = {
					OR = {
						has_wonder_upgrade = upgrade_old_god_cthun_1
						has_wonder_upgrade = upgrade_old_god_cthun_2
						has_wonder_upgrade = upgrade_old_god_nzoth_1
						has_wonder_upgrade = upgrade_old_god_nzoth_2
						has_wonder_upgrade = upgrade_old_god_yogg_saron_1
						has_wonder_upgrade = upgrade_old_god_yogg_saron_2
					}
				}
			}
			holder_scope = { top_liege = { any_current_enemy = { character = ROOT } } }
		}
	}
	
	immediate = {
		FROM = {
			location = {
				wonder = {
					if = {
						limit = {
							has_wonder_upgrade = upgrade_old_god_cthun_1
						}
						destroy_wonder_upgrade = upgrade_old_god_cthun_1
						offmap_cthun = {
							set_status = old_god_dead
						}
						ROOT = { set_character_flag = killed_cthun }
					}
					if = {
						limit = {
							has_wonder_upgrade = upgrade_old_god_cthun_2
						}
						destroy_wonder_upgrade = upgrade_old_god_cthun_2
						offmap_cthun = {
							set_status = old_god_dead
						}
						ROOT = { set_character_flag = killed_cthun }
					}
					if = {
						limit = {
							has_wonder_upgrade = upgrade_old_god_nzoth_1
						}
						destroy_wonder_upgrade = upgrade_old_god_nzoth_1
						offmap_nzoth = {
							set_status = old_god_dead
						}
						ROOT = { set_character_flag = killed_nzoth }
					}
					if = {
						limit = {
							has_wonder_upgrade = upgrade_old_god_nzoth_2
						}
						destroy_wonder_upgrade = upgrade_old_god_nzoth_2
						offmap_nzoth = {
							set_status = old_god_dead
						}
						ROOT = { set_character_flag = killed_nzoth }
					}
					if = {
						limit = {
							has_wonder_upgrade = upgrade_old_god_yogg_saron_1
						}
						destroy_wonder_upgrade = upgrade_old_god_yogg_saron_1
						offmap_yoggsaron = {
							set_status = old_god_dead
						}
						ROOT = { set_character_flag = killed_yoggsaron }
					}
					if = {
						limit = {
							has_wonder_upgrade = upgrade_old_god_yogg_saron_2
						}
						destroy_wonder_upgrade = upgrade_old_god_yogg_saron_2
						offmap_yoggsaron = {
							set_status = old_god_dead
						}
						ROOT = { set_character_flag = killed_yoggsaron }
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTA_WCOME.200
		prestige = 1000
		if = {
			limit = { NOT = { has_nickname = nick_the_godslayer } }
			give_nickname = nick_the_godslayer
		}
		if = {
			limit = {
				has_character_flag = killed_cthun
				has_character_flag = killed_nzoth
				has_character_flag = killed_yoggsaron
			}
			give_nickname = nick_twilight_of_the_gods
		}
		if = {
            limit = {
                has_character_flag = killed_cthun
				NOT = { has_character_flag = killed_cthun_block }
            }
			if = {
				limit = {
					is_female = yes
				}
				create_bloodline = {
					type = godslayer_bloodliner
					inheritance = matrilineal
				}
			}
			else = {
				create_bloodline = {
					type = godslayer_bloodline
				}
			}
			new_bloodline = {
				set_description = godslayer_cthun_desc
			}
			set_character_flag = killed_cthun_block
			set_character_flag = killed_cthun_desc
        }
		else_if = {
            limit = {
                has_character_flag = killed_nzoth
				NOT = { has_character_flag = killed_nzoth_block }
            }
			if = {
				limit = {
					is_female = yes
				}
				create_bloodline = {
					type = godslayer_bloodline
					inheritance = matrilineal
				}
			}
			else = {
				create_bloodline = {
					type = godslayer_bloodline
				}
			}
			new_bloodline = {
				set_description = godslayer_nzoth_desc
			}
			set_character_flag = killed_nzoth_block
			set_character_flag = killed_nzoth_desc
        }
        else_if = {
			limit = {
                has_character_flag = killed_yoggsaron
				NOT = { has_character_flag = killed_yoggsaron_block }
            }
			if = {
				limit = {
					is_female = yes
				}
				create_bloodline = {
					type = godslayer_bloodline
					inheritance = matrilineal
				}
			}
			else = {
				create_bloodline = {
					type = godslayer_bloodline
				}
			}
			new_bloodline = {
				set_description = godslayer_yogg_saron_desc
			}
			set_character_flag = killed_yoggsaron_block
			set_character_flag = killed_yoggsaron_desc
        }
		
		any_player = {
			narrative_event = { id = WCOME.201 }
		}
	}
}

narrative_event = {
	id = WCOME.201
	desc = {
		trigger = { FROM = { has_character_flag = killed_cthun_desc } }
		text = EVTDESC_WCOME.201_cthun
		title = EVTTITLE_WCOME.201_cthun
		picture = GFX_evt_cthun
    }
	desc = {
		trigger = { FROM = { has_character_flag = killed_nzoth_desc } }
		text = EVTDESC_WCOME.201_nzoth
		title = EVTTITLE_WCOME.201_nzoth
		picture = GFX_evt_yogg_saron
    }
	desc = {
		trigger = { FROM = { has_character_flag = killed_yoggsaron_desc } }
		text = EVTDESC_WCOME.201_yoggsaron
		title = EVTTITLE_WCOME.201_yoggsaron
		picture = GFX_evt_nzoth
    }
	border = GFX_event_narrative_frame_intrigue
	
	is_triggered_only = yes

	option = {
		name = EVTOPTA_WCOME_201
		trigger = {
			NOT = { true_religion = old_gods_worship }
		}
	}
	option = {
		name = EVTOPTA_WCOME_201_old_gods
		trigger = {
			true_religion = old_gods_worship 
		}
	}
	after = {
		if = {
			limit = { ROOT = { character = FROM } }
			clr_character_flag = killed_cthun_desc
			clr_character_flag = killed_nzoth_desc
			clr_character_flag = killed_yoggsaron_desc
		}
	}
}
character_event = {
	id = WCOME.250
	desc = {
		trigger = { FROM = { title = c_ahnqiraj } }
		text = EVTDESC_WCOME.250
		picture = GFX_evt_cthun
    }
	desc = {
		trigger = { FROM = { title = c_sagehold } }
		text = EVTDESC_WCOME.250
		picture = GFX_evt_yogg_saron
    }
	desc = {
		trigger = { FROM = { title = c_ulduar } }
		text = EVTDESC_WCOME.250
		picture = GFX_evt_nzoth
    }
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	only_playable = yes
	
	trigger = {
		NOT = { top_liege = { religion = old_gods_worship } }
		FROM = {
			OR = {
				AND = {
					title = c_ahnqiraj
					location = {
						wonder = {
							OR = {
								has_wonder_upgrade = upgrade_old_god_cthun_1
								has_wonder_upgrade = upgrade_old_god_cthun_2
							}
						}
					}
				}
				AND = {
					title = c_sagehold
					location = {
						wonder = {
							OR = {
								has_wonder_upgrade = upgrade_old_god_nzoth_1
								has_wonder_upgrade = upgrade_old_god_nzoth_2
							}
						}
					}
				}
				AND = {
					title = c_ulduar
					location = {
						wonder = {
							OR = {
								has_wonder_upgrade = upgrade_old_god_yogg_saron_1
								has_wonder_upgrade = upgrade_old_god_yogg_saron_2
							}
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_WCOME.250
		if = {
			limit = {
				FROM = {
					title = c_ahnqiraj
					location = {
						wonder = {
							OR = {
								has_wonder_upgrade = upgrade_old_god_cthun_1
								has_wonder_upgrade = upgrade_old_god_cthun_2
							}
						}
					}
				}
			}
			e_herald_cthun = {
				owner = {
					grant_title_no_opinion = c_ahnqiraj
				}
			}
		}
		else_if = {
			limit = {
				FROM = {
					title = c_sagehold
					location = {
						wonder = {
							OR = {
								has_wonder_upgrade = upgrade_old_god_nzoth_1
								has_wonder_upgrade = upgrade_old_god_nzoth_2
							}
						}
					}
				}
			}
			e_herald_nzoth = {
				owner = {
					grant_title_no_opinion = c_sagehold
				}
			}
		}
		else = {
			limit = {
				FROM = {
					title = c_ulduar
					location = {
						wonder = {
							OR = {
								has_wonder_upgrade = upgrade_old_god_yogg_saron_1
								has_wonder_upgrade = upgrade_old_god_yogg_saron_2
							}
						}
					}
				}
			}
			e_herald_yoggsaron = {
				owner = {
					grant_title_no_opinion = c_ulduar
				}
			}
		}
	}
}

character_event = {
	id = WCOME.300
	desc = {
       trigger = { ROOT = { has_character_modifier = follower_of_cthun } }
       text = EVTDESC_WCOME.300_cthun
       picture = GFX_evt_cthun
    }
	desc = {
       trigger = { ROOT = { has_character_modifier = follower_of_yogg_saron } }
       text = EVTDESC_WCOME.300_yoggsaron
       picture = GFX_evt_yogg_saron
    }
	desc = {
       trigger = { ROOT = { has_character_modifier = follower_of_nzoth } }
       text = EVTDESC_WCOME.300_nzoth
       picture = GFX_evt_nzoth
    }
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	only_playable = yes
	
	trigger = {
		religion = old_gods_worship
	}
	
	option = {
		name = EVTOPTA_WCOME.300
		if = {
			limit = { cthun_offmap_decisions_enabled_trigger = yes }
			if = {
				limit = { offmap_cthun = { has_status = old_god_imprisoned } }
				offmap_cthun = { set_status = old_god_partly_imprisoned }
				clr_character_flag = freeing_old_god_flag
				break = yes
			}
			if = {
				limit = { offmap_cthun = { has_status = old_god_partly_imprisoned } }
				offmap_cthun = { set_status = old_god_partly_free }
				set_global_flag = reawakening_of_cthun_flag
				2956 = {
					wonder = {
						add_upgrade_slots = 1
						add_wonder_upgrade = upgrade_old_god_cthun_1
					}
					province_event = { id = WCOME.350 }
				}
				break = yes
			}
			if = {
				limit = { offmap_cthun = { has_status = old_god_partly_free } }
				offmap_cthun = { set_status = old_god_free }
				2956 = {
					wonder = {
						destroy_wonder_upgrade = upgrade_old_god_cthun_1
						add_wonder_upgrade = upgrade_old_god_cthun_2
					}
				}
				clr_character_flag = freeing_old_god_flag
			}
		}
		if = {
			limit = { nzoth_offmap_decisions_enabled_trigger = yes }
			if = {
				limit = { offmap_nzoth = { has_status = old_god_imprisoned } }
				offmap_nzoth = { set_status = old_god_partly_imprisoned }
				clr_character_flag = freeing_old_god_flag
				break = yes
			}
			if = {
				limit = { offmap_nzoth = { has_status = old_god_partly_imprisoned } }
				offmap_nzoth = { set_status = old_god_partly_free }
				set_global_flag = reawakening_of_nzoth_flag
				3545 = {
					wonder = {
						add_upgrade_slots = 1
						add_wonder_upgrade = upgrade_old_god_nzoth_1
					}
					province_event = { id = WCOME.350 }
				}
				break = yes
			}
			if = {
				limit = { offmap_nzoth = { has_status = old_god_partly_free } }
				offmap_nzoth = { set_status = old_god_free }
				3545 = {
					wonder = {
						destroy_wonder_upgrade = upgrade_old_god_nzoth_1
						add_wonder_upgrade = upgrade_old_god_nzoth_2
					}
				}
				clr_character_flag = freeing_old_god_flag
			}
		}
		if = {
			limit = { yogg_saron_offmap_decisions_enabled_trigger = yes }
			if = {
				limit = { offmap_yoggsaron = { has_status = old_god_imprisoned } }
				offmap_yoggsaron = { set_status = old_god_partly_imprisoned }
				d_ulduar = {
					holder_scope = {
						any_realm_character = {
							religion = old_gods_worship
							set_government_type = black_pact_government
						}
						religion = old_gods_worship
						set_government_type = black_pact_government
						any_realm_province = {
							remove_province_modifier = ulduar_closed_down
							religion = old_gods_worship
						}
					}
				}
				set_global_flag = ulduar_opened_flag
				clr_character_flag = freeing_old_god_flag
				break = yes
			}
			if = {
				limit = { offmap_yoggsaron = { has_status = old_god_partly_imprisoned } }
				offmap_yoggsaron = { set_status = old_god_partly_free }
				set_global_flag = reawakening_of_yogg_saron_flag
				858 = {
					wonder = {
						add_upgrade_slots = 1
						add_wonder_upgrade = upgrade_old_god_yogg_saron_1
					}
					province_event = { id = WCOME.350 }
				}
				break = yes
			}
			if = {
				limit = { offmap_yoggsaron = { has_status = old_god_partly_free } }
				offmap_yoggsaron = { set_status = old_god_free }
				858 = {
					wonder = {
						destroy_wonder_upgrade = upgrade_old_god_yogg_saron_1
						add_wonder_upgrade = upgrade_old_god_yogg_saron_2
					}
				}
				clr_character_flag = freeing_old_god_flag
			}
		}
	}
}
### The Reawakening of C'thun ###
# Ping event
province_event = {
	id = WCOME.350

	is_triggered_only = yes
	hide_window = yes

	trigger = {
	}

	immediate = {
		if = {
			limit = { has_global_flag = reawakening_of_cthun_flag }
			b_ahnqiraj = {
					holder_scope = { narrative_event = { id = WCOME.360 } }
			}
		}
		if = {
			limit = { has_global_flag = reawakening_of_nzoth_flag }
			b_sagehold = {
					holder_scope = { narrative_event = { id = WCOME.360 } }
			}
		}
		if = {
			limit = { has_global_flag = reawakening_of_yogg_saron_flag }
			b_ulduar = {
					holder_scope = { narrative_event = { id = WCOME.360 } }
			}
		}
	}
}
# Main event
narrative_event = {
	id = WCOME.360
	title = EVTTITLE_WCOME.360
	desc = {
       trigger = { ROOT = { has_character_modifier = follower_of_cthun } }
       text = EVTDESC_WCOME.360_cthun
       picture = GFX_evt_cthun
    }
	desc = {
       trigger = { ROOT = { has_character_modifier = follower_of_yogg_saron } }
       text = EVTDESC_WCOME.360_yoggsaron
       picture = GFX_evt_yogg_saron
    }
	desc = {
       trigger = { ROOT = { has_character_modifier = follower_of_nzoth } }
       text = EVTDESC_WCOME.360_nzoth
       picture = GFX_evt_nzoth
    }
	border = GFX_event_narrative_frame_war

	is_triggered_only = yes

	major = yes
	major_trigger = {
		ai = no
	}
	show_root = yes

	immediate = {
		if = {
			limit = { has_global_flag = reawakening_of_cthun_flag }
			2956 = { save_event_target_as = target_province }
		}
		if = {
			limit = { has_global_flag = reawakening_of_nzoth_flag }
			3545 = { save_event_target_as = target_province }
		}
		if = {
			limit = { has_global_flag = reawakening_of_yogg_saron_flag }
			858 = { save_event_target_as = target_province }
		}
	}

	option = {
		trigger = { true_religion = old_gods_worship }
		name = EVTOPTA_WCOME.360

		if = {
			limit = {
				character = ROOT
				cthun_offmap_decisions_enabled_trigger = yes
			}
			
			# Gives gold
			wealth = 1000
			
			# Spawns troops
			spawn_qiraji_troops_effect = yes
			spawn_qiraji_troops_effect = yes
			spawn_qiraji_troops_effect = yes
			spawn_qiraji_troops_effect = yes
			if = {		# Gives troops and gold to another Twin Emperor
				limit = {
					k_ahnqiraj = {
						holder_scope = {
							reawakening_of_cthun_qiraji_event_trigger = yes
						}
					}
				}
				k_ahnqiraj = {
					holder_scope = {
						# Gives gold
						wealth = 500
						
						# Spawns troops
						spawn_qiraji_troops_effect = yes
						spawn_qiraji_troops_effect = yes
					}
				}
			}
			else = {
				spawn_qiraji_troops_effect = yes
				spawn_qiraji_troops_effect = yes
			}
			
			narrative_event = { id = WCOME.370 days = 360 random = 720 }
			clr_global_flag = reawakening_of_cthun_flag 
		}
		else_if = {
			limit = {
				character = ROOT
				nzoth_offmap_decisions_enabled_trigger = yes
			}
			
			# Gives gold
			wealth = 1000
			# Spawns troops
			spawn_nzoth_follower_troops_effect = yes
			spawn_nzoth_follower_troops_effect = yes
			spawn_nzoth_follower_troops_effect = yes
			spawn_nzoth_follower_troops_effect = yes
			spawn_nzoth_follower_troops_effect = yes
			spawn_nzoth_follower_troops_effect = yes
			narrative_event = { id = WCOME.370 days = 360 random = 720 }
			clr_global_flag = reawakening_of_nzoth_flag 
		}
		else_if = {
			limit = {
				character = ROOT
				yogg_saron_offmap_decisions_enabled_trigger = yes
			}
			
			# Gives gold
			wealth = 1000
			# Spawns troops
			spawn_yogg_saron_follower_troops_effect = yes
			spawn_yogg_saron_follower_troops_effect = yes
			spawn_yogg_saron_follower_troops_effect = yes
			spawn_yogg_saron_follower_troops_effect = yes
			spawn_yogg_saron_follower_troops_effect = yes
			spawn_yogg_saron_follower_troops_effect = yes
			narrative_event = { id = WCOME.370 days = 360 random = 720 }
			clr_global_flag = reawakening_of_yogg_saron_flag 
		}
		clr_character_flag = freeing_old_god_flag
	}
	option = {
		trigger = { NOT = { true_religion = old_gods_worship } }
		name = EVTOPTB_WCOME.360
	}
}
narrative_event = {
	id = WCOME.370
	title = EVTTITLE_WCOME.370
	desc = {
       trigger = { ROOT = { has_character_modifier = follower_of_cthun } }
       text = EVTDESC_WCOME.370_cthun
       picture = GFX_evt_cthun
    }
	desc = {
       trigger = { ROOT = { has_character_modifier = follower_of_yogg_saron } }
       text = EVTDESC_WCOME.370_yoggsaron
       picture = GFX_evt_yogg_saron
    }
	desc = {
       trigger = { ROOT = { has_character_modifier = follower_of_nzoth } }
       text = EVTDESC_WCOME.370_nzoth
       picture = GFX_evt_nzoth
    }
	border = GFX_event_narrative_frame_war

	is_triggered_only = yes

	major = yes
	major_trigger = {
		ai = no
	}
	show_root = yes
	
	trigger = {
		trigger_if = {
			limit = {
				character = ROOT
				cthun_offmap_decisions_enabled_trigger = yes
			}
			NOT  ={ offmap_cthun = { has_status = old_god_dead } }
		}
		trigger_if = {
			limit = {
				character = ROOT
				nzoth_offmap_decisions_enabled_trigger = yes
			}
			NOT  ={ offmap_nzoth = { has_status = old_god_dead } }
		}
		trigger_else = {
			NOT  ={ offmap_yoggsaron = { has_status = old_god_dead } }
		}
	}
	option = {
		trigger = { true_religion = old_gods_worship }
		name = EVTOPTA_WCOME.360

		if = {
			limit = {
				character = ROOT
				cthun_offmap_decisions_enabled_trigger = yes
			}
			offmap_cthun = { set_policy = old_god_working }
		}
		else_if = {
			limit = {
				character = ROOT
				nzoth_offmap_decisions_enabled_trigger = yes
			}
			offmap_nzoth = { set_policy = old_god_working }
		}
		else = {
			offmap_yoggsaron = { set_policy = old_god_working }
		}
	}
	option = {
		trigger = { NOT = { true_religion = old_gods_worship } }
		name = EVTOPTB_WCOME.360
	}
}
character_event = {
	id = WCOME.500
	picture = GFX_evt_old_god_healing
	desc = EVTDESC_WCOME.500
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	only_playable = yes
	
	option = {
		name = EVTOPTA_WCOME.500
		trigger = {
			OR = {
				has_injury_trigger = yes
				trait = maimed
				trait = mangled
			}
		}
		remove_trait = wounded
		remove_trait = severely_injured
		remove_trait = maimed
		remove_trait = mangled
		remove_trait = infection
		hidden_effect = {
			random_list = {
				15 = {
					character_event = { id = WCVOD.300 }
					modifier = {
						factor = 0
						check_variable = { which = void_mutations value = 5 }
					}
				}
				85 = {}
			}
			}
	}
	option = {
		name = EVTOPTB_WCOME.500
		trigger = {
			OR = {
				has_symptom_trigger = yes
				has_disease_trigger = yes
			}
		}
		#general disease clearing effects:
		remove_disease_trait_effect = yes
		remove_symptoms_effect = yes
		remove_disease_flags_effect = yes
		hidden_effect = {
			random_list = {
				30 = {
					character_event = { id = WCVOD.300 }
					modifier = {
						factor = 0
						check_variable = { which = void_mutations value = 5 }
					}
				}
				70 = {}
			}
		}
	}
	option = {
		name = EVTOPTC_WCOME.500
		trigger = {
			OR = {
				trait = one_eyed
				trait = one_handed 
				trait = one_legged 
				trait = disfigured
				trait = inbred
				trait = blinded
				trait = infirm
				trait = clubfooted
				trait = hunchback
				trait = dwarf
				trait = eunuch
				trait = harelip
				trait = stutter
				trait = lisp
				is_incapable = yes
			}
		}
		random_list = {
			10 = {
				heal_one_handed_magic_effect = yes
				random_list = {
					40 = {
						add_trait = chela_hand_mutation
						modifier = {
							factor = 0
							AND = {
								trait = void_being 
								NOT = { trait = creature_naga }
							}
						}
						modifier = {
							factor = 0
							check_variable = { which = void_mutations value = 5 }
						}
						modifier = {
							factor = 0
							trait = chela_hand_mutation
						}
					}
					40 = {
						add_trait = tentacle_arm_mutation
						modifier = {
							factor = 0
							AND = {
								trait = void_being 
								NOT = { trait = creature_naga }
							}
						}
						modifier = {
							factor = 0
							check_variable = { which = void_mutations value = 5 }
						}
						modifier = {
							factor = 0
							trait = tentacle_arm_mutation
						}
					}
					20 = {
					}
				}
				modifier = {
					factor = 0
					NOT = { trait = one_handed }
				}
			}
			10 = {
				heal_one_legged_magic_effect = yes
				modifier = {
					factor = 0
					NOT = { trait = one_legged }
				}
			}
			10 = {
				heal_one_eyed_magic_effect = yes
				random = {
					chance = 60
					add_trait = eyes_mutation
					modifier = {
							factor = 0
							AND = {
								trait = void_being 
								NOT = { trait = creature_naga }
							}
					}
					modifier = {
							factor = 0
							check_variable = { which = void_mutations value = 5 }
						}
					modifier = {
						factor = 0
						trait = eyes_mutation
					}
				}
				modifier = {
					factor = 0
					NOT = { trait = one_eyed }
				}
			}
			10 = {
				heal_disfigured_magic_effect = yes
				modifier = {
					factor = 0
					NOT = { trait = disfigured }
				}
			}
			10 = {
				limit = { trait = blinded }
				remove_trait = blinded
				random = {
					chance = 60
					add_trait = eyes_mutation
					modifier = {
							factor = 0
							AND = {
								trait = void_being 
								NOT = { trait = creature_naga }
							}
					}
					modifier = {
							factor = 0
							check_variable = { which = void_mutations value = 5 }
						}
					modifier = {
						factor = 0
						trait = eyes_mutation
					}
				}
				modifier = {
					factor = 0
					NOT = { trait = blinded }
				}
			}
			10 = {
				limit = { trait = infirm }
				remove_trait = infirm 
				modifier = {
					factor = 0
					NOT = { trait = infirm }
				}
			}
			10 = {
				limit = { trait = inbred }
				remove_trait = inbred
				modifier = {
					factor = 0
					NOT = { trait = inbred }
				}
			}
			10 = {
				limit = { trait = clubfooted }
				remove_trait = clubfooted
				modifier = {
					factor = 0
					NOT = { trait = clubfooted }
				}
			}
			10 = {
				limit = { trait = hunchback }
				remove_trait = hunchback
				modifier = {
					factor = 0
					NOT = { trait = hunchback }
				}
			}
			10 = {
				limit = { trait = dwarf }
				remove_trait = dwarf
				modifier = {
					factor = 0
					NOT = { trait = dwarf }
				}
			}
			10 = {
				limit = { trait = dwarf }
				remove_trait = dwarf
				modifier = {
					factor = 0
					NOT = { trait = dwarf }
				}
			}
			10 = {
				limit = { trait = eunuch }
				remove_trait = eunuch
				modifier = {
					factor = 0
					NOT = { trait = eunuch }
				}
			}
			10 = {
				limit = { trait = harelip }
				remove_trait = harelip
				modifier = {
					factor = 0
					NOT = { trait = harelip }
				}
			}
			10 = {
				limit = { trait = stutter }
				remove_trait = stutter
				modifier = {
					factor = 0
					NOT = { trait = stutter }
				}
			}
			10 = {
				limit = { trait = lisp }
				remove_trait = lisp
				modifier = {
					factor = 0
					NOT = { trait = lisp }
				}
			}
			10 = {
				limit = { trait = incapable }
				remove_trait = incapable
				modifier = {
					factor = 0
					NOT = { trait = incapable }
				}
			}
		}
		hidden_effect = {
			random_list = {
				50 = {
					character_event = { id = WCVOD.300 }
					modifier = {
						factor = 0
						check_variable = { which = void_mutations value = 5 }
					}
				}
				50 = {}
			}
		}
	}
	after = {
		if = {
			limit = {
				NOR = {
					has_disease_trigger = yes
					has_symptom_trigger = yes
					has_injury_trigger = yes
					is_maimed_trigger = yes
					has_disability_trigger = yes
				}
			}
			remove_symptoms_effect = yes
			clear_disease_level_effect = yes
			remove_disease_flags_effect = yes
			hidden_effect = { remove_treatment_modifiers_effect = yes }
		}
	}
}